import{r as l,j as m}from"./index-KCHaM-0W.js";import{S as y,P as z,W as F,A,D,G as S,B as M,V as P,O as R}from"./three-C1JwyTpg.js";const k=({modelPath:p})=>{const u=l.useRef(null),[h,g]=l.useState(0),[c,v]=l.useState(null);return l.useEffect(()=>{let s,i,o,n,t,w;const r=u.current;if(!r){console.error("Three.js mount container not found.");return}s=new y,i=new z(75,r.offsetWidth/r.offsetHeight,.1,1e3),i.position.set(0,.2,.5),i.lookAt(s.position),o=new F({antialias:!0,alpha:!0}),o.setSize(r.offsetWidth,r.offsetHeight),o.setClearColor(15921906,0),r.appendChild(o.domElement);const L=new A(16777215,1.5);s.add(L);const x=new D(16777215,1.5);x.position.set(1,1,2),s.add(x);const b=new S,C=`/Chi-Botanical/${p}`;b.load(C,e=>{n=e.scene;const a=new M().setFromObject(n),d=new P;a.getCenter(d),n.position.x=-d.x,n.position.y=-d.y,n.position.z=-d.z,n.scale.set(.7,.7,.7),s.add(n),t=new R(i,o.domElement),t.enableDamping=!0,t.dampingFactor=.1,t.enableZoom=!1,t.enablePan=!1,t.enableRotate=!0,t.target.set(0,0,0),t.minDistance=.3,t.maxDistance=1,t.update(),E(),f(),g(100)},e=>{g(Math.round(e.loaded/e.total*100))},e=>{console.error("Failed to load model:",e),v("Failed to load 3D model. Check console for details.")});const E=()=>{w=requestAnimationFrame(E),n&&(n.rotation.y+=.005,n.rotation.x+=.003),t&&t.update(),o.render(s,i)},f=()=>{const e=r.offsetWidth,a=r.offsetHeight;i.aspect=e/a,i.updateProjectionMatrix(),o.setSize(e,a)};return window.addEventListener("resize",f,!1),()=>{cancelAnimationFrame(w),window.removeEventListener("resize",f,!1),t&&t.dispose(),o&&o.dispose(),s&&s.traverse(e=>{e.isMesh&&(e.geometry.dispose(),Array.isArray(e.material)?e.material.forEach(a=>a.dispose()):e.material.dispose())}),r&&o.domElement&&r.removeChild(o.domElement)}},[p]),m.jsxs("div",{ref:u,style:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},children:[h<100&&!c&&m.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#000",zIndex:10},children:["Loading: ",h,"%"]}),c&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"red",color:"white",padding:"20px",zIndex:10},children:c})]})};export{k as default};
